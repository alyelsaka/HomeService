<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - HomeServices</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Language selector styling */
        .language-selector {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
        }

        #language-selector {
            padding: 8px;
            border-radius: 5px;
            border: 1px solid #ccc;
            background-color: #fff;
            color: #333;
            font-size: 16px;
        }

        /* RTL support for Arabic */
        body[dir="rtl"] {
            direction: rtl;
            text-align: right;
        }
    </style>
</head>
<body class="dashboard-body">
    <!-- Navigation Bar -->
    <nav class="dashboard-nav">
        <div class="nav-brand" onclick="location.href='index.html'" data-translate="home">HomeServices</div>
        <div class="admin-info">
            <span id="adminName" data-translate="welcome">Welcome, <span id="adminNamePlaceholder">Loading...</span></span>
            <button onclick="logout()" class="logout-btn">
                <i class="fas fa-sign-out-alt"></i> <span data-translate="logout">Logout</span>
            </button>
        </div>
    </nav>

    <!-- Dashboard Container -->
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="dashboard-sidebar">
            <div class="profile-section">
                <div class="profile-image">
                    <i class="fas fa-user-circle"></i>
                </div>
                <div class="admin-status">
                    <span id="currentStatus" class="status-badge active" data-translate="active">Active</span>
                </div>
            </div>

            <nav class="sidebar-nav">
                <button class="nav-item active" onclick="showSection('accounts')">
                    <i class="fas fa-users"></i> <span data-translate="accountManagement">Account Management</span>
                </button>
                <button class="nav-item" onclick="showSection('workerVerification')">
                    <i class="fas fa-id-card"></i> <span data-translate="workerVerification">Worker Verification</span>
                </button>
                <button class="nav-item" onclick="showSection('serviceManagement')">
                    <i class="fas fa-cogs"></i> <span data-translate="serviceManagement">Service Management</span>
                </button>
                <button class="nav-item" onclick="showSection('systemMonitoring')">
                    <i class="fas fa-chart-line"></i> <span data-translate="systemMonitoring">System Monitoring</span>
                </button>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="dashboard-main">
            <!-- Account Management Section -->
            <section id="accounts" class="dashboard-section active">
                <h2 data-translate="accountManagement">Account Management</h2>
                <div id="accountsContainer" class="accounts-grid">
                    <p data-translate="loadingAccounts">Loading account data...</p>
                </div>
            </section>

            <!-- Worker Verification Section -->
            <section id="workerVerification" class="dashboard-section">
                <h2 data-translate="workerVerification">Worker Verification</h2>
                <div id="pending-workers-container" class="pending-workers-container">
                    <p data-translate="loadingPendingWorkers">Loading pending workers...</p>
                </div>
            </section>

            <!-- Service Management Section -->
            <section id="serviceManagement" class="dashboard-section">
                <h2 data-translate="serviceManagement">Service Management</h2>
                <div id="services-container" class="services-container">
                    <p data-translate="loadingServices">Loading services...</p>
                </div>
            </section>

            <!-- System Monitoring Section -->
            <section id="systemMonitoring" class="dashboard-section">
                <h2 data-translate="systemMonitoring">System Monitoring</h2>
                <div id="reports-container" class="monitoring-container">
                    <p data-translate="loadingSystemData">Loading system data...</p>
                </div>
            </section>
        </main>
    </div>

    <!-- Footer -->
    <footer class="dashboard-footer">
        <p data-translate="contactUs">Contact us: support@homeservices.com | +123 456 7890</p>
        <div class="social-media">
            <a href="#"><i class="fab fa-facebook"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
        </div>
    </footer>

    <!-- Language Selector -->
    <div class="language-selector">
        <select id="language-selector" onchange="changeLanguage(this.value)">
            <option value="en">ğŸ‡ºğŸ‡¸ English</option>
            <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡ (Chinese)</option>
            <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol (Spanish)</option>
            <option value="hi">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤¨à¥à¤¦à¥€ (Hindi)</option>
            <option value="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Arabic)</option>
            <option value="pt">ğŸ‡µğŸ‡¹ PortuguÃªs (Portuguese)</option>
            <option value="bn">ğŸ‡§ğŸ‡© à¦¬à¦¾à¦‚à¦²à¦¾ (Bengali)</option>
            <option value="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹ (Russian)</option>
            <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª (Japanese)</option>
            <option value="pa">ğŸ‡®ğŸ‡³ à¨ªà©°à¨œà¨¾à¨¬à©€ (Punjabi)</option>
            <option value="de">ğŸ‡©ğŸ‡ª Deutsch (German)</option>
            <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais (French)</option>
        </select>
    </div>

    <script>
        // Define translations for all supported languages
        const translations = {
            en: {
                home: "HomeServices",
                welcome: "Welcome",
                logout: "Logout",
                active: "Active",
                accountManagement: "Account Management",
                workerVerification: "Worker Verification",
                serviceManagement: "Service Management",
                systemMonitoring: "System Monitoring",
                loadingAccounts: "Loading account data...",
                loadingPendingWorkers: "Loading pending workers...",
                loadingServices: "Loading services...",
                loadingSystemData: "Loading system data...",
                contactUs: "Contact us: support@homeservices.com | +123 456 7890"
            },
            zh: {
                home: "å®¶åº­æœåŠ¡",
                welcome: "æ¬¢è¿",
                logout: "ç™»å‡º",
                active: "æ´»è·ƒ",
                accountManagement: "è´¦æˆ·ç®¡ç†",
                workerVerification: "å·¥äººéªŒè¯",
                serviceManagement: "æœåŠ¡ç®¡ç†",
                systemMonitoring: "ç³»ç»Ÿç›‘æ§",
                loadingAccounts: "æ­£åœ¨åŠ è½½è´¦æˆ·æ•°æ®...",
                loadingPendingWorkers: "æ­£åœ¨åŠ è½½å¾…å¤„ç†å·¥äºº...",
                loadingServices: "æ­£åœ¨åŠ è½½æœåŠ¡...",
                loadingSystemData: "æ­£åœ¨åŠ è½½ç³»ç»Ÿæ•°æ®...",
                contactUs: "è”ç³»æˆ‘ä»¬: support@homeservices.com | +123 456 7890"
            },
            es: {
                home: "Servicios del Hogar",
                welcome: "Bienvenido",
                logout: "Cerrar sesiÃ³n",
                active: "Activo",
                accountManagement: "GestiÃ³n de Cuentas",
                workerVerification: "VerificaciÃ³n de Trabajadores",
                serviceManagement: "GestiÃ³n de Servicios",
                systemMonitoring: "Monitoreo del Sistema",
                loadingAccounts: "Cargando datos de cuentas...",
                loadingPendingWorkers: "Cargando trabajadores pendientes...",
                loadingServices: "Cargando servicios...",
                loadingSystemData: "Cargando datos del sistema...",
                contactUs: "ContÃ¡ctenos: support@homeservices.com | +123 456 7890"
            },
            hi: {
                home: "à¤¹à¥‹à¤® à¤¸à¤°à¥à¤µà¤¿à¤¸à¥‡à¤œ",
                welcome: "à¤¸à¥à¤µà¤¾à¤—à¤¤ à¤¹à¥ˆ",
                logout: "à¤²à¥‰à¤—à¤†à¤‰à¤Ÿ",
                active: "à¤¸à¤•à¥à¤°à¤¿à¤¯",
                accountManagement: "à¤–à¤¾à¤¤à¤¾ à¤ªà¥à¤°à¤¬à¤‚à¤§à¤¨",
                workerVerification: "à¤•à¤°à¥à¤®à¤šà¤¾à¤°à¥€ à¤¸à¤¤à¥à¤¯à¤¾à¤ªà¤¨",
                serviceManagement: "à¤¸à¥‡à¤µà¤¾ à¤ªà¥à¤°à¤¬à¤‚à¤§à¤¨",
                systemMonitoring: "à¤¸à¤¿à¤¸à¥à¤Ÿà¤® à¤®à¥‰à¤¨à¤¿à¤Ÿà¤°à¤¿à¤‚à¤—",
                loadingAccounts: "à¤–à¤¾à¤¤à¤¾ à¤¡à¥‡à¤Ÿà¤¾ à¤²à¥‹à¤¡ à¤¹à¥‹ à¤°à¤¹à¤¾ à¤¹à¥ˆ...",
                loadingPendingWorkers: "à¤²à¤‚à¤¬à¤¿à¤¤ à¤•à¤°à¥à¤®à¤šà¤¾à¤°à¥€ à¤²à¥‹à¤¡ à¤¹à¥‹ à¤°à¤¹à¥‡ à¤¹à¥ˆà¤‚...",
                loadingServices: "à¤¸à¥‡à¤µà¤¾à¤à¤‚ à¤²à¥‹à¤¡ à¤¹à¥‹ à¤°à¤¹à¥€ à¤¹à¥ˆà¤‚...",
                loadingSystemData: "à¤¸à¤¿à¤¸à¥à¤Ÿà¤® à¤¡à¥‡à¤Ÿà¤¾ à¤²à¥‹à¤¡ à¤¹à¥‹ à¤°à¤¹à¤¾ à¤¹à¥ˆ...",
                contactUs: "à¤¹à¤®à¤¸à¥‡ à¤¸à¤‚à¤ªà¤°à¥à¤• à¤•à¤°à¥‡à¤‚: support@homeservices.com | +123 456 7890"
            },
            ar: {
                home: "Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ù†Ø²Ù„",
                welcome: "Ù…Ø±Ø­Ø¨Ù‹Ø§",
                logout: "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬",
                active: "Ù†Ø´Ø·",
                accountManagement: "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª",
                workerVerification: "Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¹Ù…Ø§Ù„",
                serviceManagement: "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª",
                systemMonitoring: "Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù†Ø¸Ø§Ù…",
                loadingAccounts: "Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª...",
                loadingPendingWorkers: "Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù…Ø§Ù„ Ø§Ù„Ù…Ø¹Ù„Ù‘Ù‚ÙŠÙ†...",
                loadingServices: "Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø§Øª...",
                loadingSystemData: "Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…...",
                contactUs: "Ø§ØªØµÙ„ Ø¨Ù†Ø§: support@homeservices.com | +123 456 7890"
            },
            pt: {
                home: "ServiÃ§os DomÃ©sticos",
                welcome: "Bem-vindo",
                logout: "Sair",
                active: "Ativo",
                accountManagement: "Gerenciamento de Contas",
                workerVerification: "VerificaÃ§Ã£o de Trabalhadores",
                serviceManagement: "Gerenciamento de ServiÃ§os",
                systemMonitoring: "Monitoramento do Sistema",
                loadingAccounts: "Carregando dados da conta...",
                loadingPendingWorkers: "Carregando trabalhadores pendentes...",
                loadingServices: "Carregando serviÃ§os...",
                loadingSystemData: "Carregando dados do sistema...",
                contactUs: "Contate-nos: support@homeservices.com | +123 456 7890"
            },
            bn: {
                home: "à¦¹à§‹à¦® à¦¸à¦¾à¦°à§à¦­à¦¿à¦¸à§‡à¦¸",
                welcome: "à¦¸à§à¦¬à¦¾à¦—à¦¤à¦®",
                logout: "à¦²à¦—à¦†à¦‰à¦Ÿ",
                active: "à¦¸à¦•à§à¦°à¦¿à¦¯à¦¼",
                accountManagement: "à¦…à§à¦¯à¦¾à¦•à¦¾à¦‰à¦¨à§à¦Ÿ à¦¬à§à¦¯à¦¬à¦¸à§à¦¥à¦¾à¦ªà¦¨à¦¾",
                workerVerification: "à¦•à¦°à§à¦®à§€ à¦¯à¦¾à¦šà¦¾à¦‡à¦•à¦°à¦£",
                serviceManagement: "à¦¸à§‡à¦¬à¦¾ à¦¬à§à¦¯à¦¬à¦¸à§à¦¥à¦¾à¦ªà¦¨à¦¾",
                systemMonitoring: "à¦¸à¦¿à¦¸à§à¦Ÿà§‡à¦® à¦ªà¦°à§à¦¯à¦¬à§‡à¦•à§à¦·à¦£",
                loadingAccounts: "à¦…à§à¦¯à¦¾à¦•à¦¾à¦‰à¦¨à§à¦Ÿ à¦¡à§‡à¦Ÿà¦¾ à¦²à§‹à¦¡ à¦¹à¦šà§à¦›à§‡...",
                loadingPendingWorkers: "à¦®à§à¦²à¦¤à§à¦¬à¦¿ à¦•à¦°à§à¦®à§€ à¦²à§‹à¦¡ à¦¹à¦šà§à¦›à§‡...",
                loadingServices: "à¦¸à§‡à¦¬à¦¾ à¦²à§‹à¦¡ à¦¹à¦šà§à¦›à§‡...",
                loadingSystemData: "à¦¸à¦¿à¦¸à§à¦Ÿà§‡à¦® à¦¡à§‡à¦Ÿà¦¾ à¦²à§‹à¦¡ à¦¹à¦šà§à¦›à§‡...",
                contactUs: "à¦¯à§‹à¦—à¦¾à¦¯à§‹à¦— à¦•à¦°à§à¦¨: support@homeservices.com | +123 456 7890"
            },
            ru: {
                home: "Ğ”Ğ¾Ğ¼Ğ°ÑˆĞ½Ğ¸Ğµ Ğ£ÑĞ»ÑƒĞ³Ğ¸",
                welcome: "Ğ”Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ",
                logout: "Ğ’Ñ‹Ğ¹Ñ‚Ğ¸",
                active: "ĞĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹",
                accountManagement: "Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞĞºĞºĞ°ÑƒĞ½Ñ‚Ğ°Ğ¼Ğ¸",
                workerVerification: "ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ½Ğ¸ĞºĞ¾Ğ²",
                serviceManagement: "Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ£ÑĞ»ÑƒĞ³Ğ°Ğ¼Ğ¸",
                systemMonitoring: "ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ñ‹",
                loadingAccounts: "Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ¾Ğ²...",
                loadingPendingWorkers: "Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¾Ğ¶Ğ¸Ğ´Ğ°ÑÑ‰Ğ¸Ñ… Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ½Ğ¸ĞºĞ¾Ğ²...",
                loadingServices: "Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° ÑƒÑĞ»ÑƒĞ³...",
                loadingSystemData: "Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹...",
                contactUs: "Ğ¡Ğ²ÑĞ¶Ğ¸Ñ‚ĞµÑÑŒ Ñ Ğ½Ğ°Ğ¼Ğ¸: support@homeservices.com | +123 456 7890"
            },
            ja: {
                home: "ãƒ›ãƒ¼ãƒ ã‚µãƒ¼ãƒ“ã‚¹",
                welcome: "ã‚ˆã†ã“ã",
                logout: "ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ",
                active: "ã‚¢ã‚¯ãƒ†ã‚£ãƒ–",
                accountManagement: "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†",
                workerVerification: "ãƒ¯ãƒ¼ã‚«ãƒ¼ã®ç¢ºèª",
                serviceManagement: "ã‚µãƒ¼ãƒ“ã‚¹ç®¡ç†",
                systemMonitoring: "ã‚·ã‚¹ãƒ†ãƒ ç›£è¦–",
                loadingAccounts: "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...",
                loadingPendingWorkers: "ä¿ç•™ä¸­ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ã‚’èª­ã¿è¾¼ã¿ä¸­...",
                loadingServices: "ã‚µãƒ¼ãƒ“ã‚¹ã‚’èª­ã¿è¾¼ã¿ä¸­...",
                loadingSystemData: "ã‚·ã‚¹ãƒ†ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...",
                contactUs: "ãŠå•ã„åˆã‚ã›: support@homeservices.com | +123 456 7890"
            },
            pa: {
                home: "à¨˜à¨° à¨¸à©‡à¨µà¨¾à¨µà¨¾à¨‚",
                welcome: "à¨œà©€ à¨†à¨‡à¨†à¨‚ à¨¨à©‚à©°",
                logout: "à¨²à©Œà¨—à¨†à¨‰à¨Ÿ",
                active: "à¨¸à¨°à¨—à¨°à¨®",
                accountManagement: "à¨–à¨¾à¨¤à¨¾ à¨ªà©à¨°à¨¬à©°à¨§à¨¨",
                workerVerification: "à¨•à¨°à¨®à¨šà¨¾à¨°à©€ à¨ªà©œà¨¤à¨¾à¨²",
                serviceManagement: "à¨¸à©‡à¨µà¨¾ à¨ªà©à¨°à¨¬à©°à¨§à¨¨",
                systemMonitoring: "à¨¸à¨¿à¨¸à¨Ÿà¨® à¨¨à¨¿à¨—à¨°à¨¾à¨¨à©€",
                loadingAccounts: "à¨–à¨¾à¨¤à¨¾ à¨¡à©‡à¨Ÿà¨¾ à¨²à©‹à¨¡ à¨¹à©‹ à¨°à¨¿à¨¹à¨¾ à¨¹à©ˆ...",
                loadingPendingWorkers: "à¨²à©°à¨¬à¨¤ à¨•à¨°à¨®à¨šà¨¾à¨°à©€ à¨²à©‹à¨¡ à¨¹à©‹ à¨°à¨¹à©‡ à¨¹à¨¨...",
                loadingServices: "à¨¸à©‡à¨µà¨¾à¨µà¨¾à¨‚ à¨²à©‹à¨¡ à¨¹à©‹ à¨°à¨¹à©€à¨†à¨‚ à¨¹à¨¨...",
                loadingSystemData: "à¨¸à¨¿à¨¸à¨Ÿà¨® à¨¡à©‡à¨Ÿà¨¾ à¨²à©‹à¨¡ à¨¹à©‹ à¨°à¨¿à¨¹à¨¾ à¨¹à©ˆ...",
                contactUs: "à¨¸à¨¾à¨¡à©‡ à¨¨à¨¾à¨² à¨¸à©°à¨ªà¨°à¨• à¨•à¨°à©‹: support@homeservices.com | +123 456 7890"
            },
            de: {
                home: "Hausdienstleistungen",
                welcome: "Willkommen",
                logout: "Abmelden",
                active: "Aktiv",
                accountManagement: "Kontoverwaltung",
                workerVerification: "MitarbeiterÃ¼berprÃ¼fung",
                serviceManagement: "Dienstleistungsverwaltung",
                systemMonitoring: "SystemÃ¼berwachung",
                loadingAccounts: "Kontodaten werden geladen...",
                loadingPendingWorkers: "Ausstehende Mitarbeiter werden geladen...",
                loadingServices: "Dienstleistungen werden geladen...",
                loadingSystemData: "Systemdaten werden geladen...",
                contactUs: "Kontaktieren Sie uns: support@homeservices.com | +123 456 7890"
            },
            fr: {
                home: "Services Ã  Domicile",
                welcome: "Bienvenue",
                logout: "DÃ©connexion",
                active: "Actif",
                accountManagement: "Gestion des Comptes",
                workerVerification: "VÃ©rification des Travailleurs",
                serviceManagement: "Gestion des Services",
                systemMonitoring: "Surveillance du SystÃ¨me",
                loadingAccounts: "Chargement des donnÃ©es du compte...",
                loadingPendingWorkers: "Chargement des travailleurs en attente...",
                loadingServices: "Chargement des services...",
                loadingSystemData: "Chargement des donnÃ©es du systÃ¨me...",
                contactUs: "Contactez-nous: support@homeservices.com | +123 456 7890"
            }
        };

        // Function to change language
        function changeLanguage(language) {
            const elements = document.querySelectorAll('[data-translate]');
            elements.forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[language] && translations[language][key]) {
                    element.textContent = translations[language][key];
                }
            });

            // Update text direction for RTL languages (e.g., Arabic)
            if (language === "ar") {
                document.body.setAttribute("dir", "rtl");
            } else {
                document.body.setAttribute("dir", "ltr");
            }
        }

        // Initialize with default language (English)
        document.addEventListener('DOMContentLoaded', () => {
            changeLanguage('en');
        });

        // Fetch client details on page load
        async function fetchClientDetails() {
            try {
                const response = await fetch('/auth/user', {
                    headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` }
                });
                const data = await response.json();
                document.getElementById('adminNamePlaceholder').textContent = data.user.name;
            } catch (error) {
                console.error('Error fetching client details:', error);
            }
        }

        // Show the selected section
        function showSection(sectionId) {
            document.querySelectorAll('.dashboard-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');

            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
        }

        // Load pending workers
        async function loadPendingWorkers() {
            try {
                const response = await fetch('/auth/admin/workers/pending', {
                    headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` }
                });

                if (response.ok) {
                    const workers = await response.json();
                    const container = document.getElementById('pending-workers-container');
                    container.innerHTML = workers.length
                        ? workers.map(worker => `
                            <div class="worker-card">
                                <h3>${worker.full_name}</h3>
                                <p>Email: ${worker.email}</p>
                                <p>Phone: ${worker.phonenumber || 'N/A'}</p>
                                <p>Service Type: ${worker.service_type}</p>
                                <p>Experience: ${worker.experience_years} years</p>
                                <button onclick="approveWorker(${worker.id})">Approve</button>
                                <button onclick="rejectWorker(${worker.id})">Reject</button>
                            </div>`).join('')
                        : '<p>No pending workers.</p>';
                } else {
                    console.error('Failed to fetch pending workers.');
                }
            } catch (error) {
                console.error('Error loading pending workers:', error);
            }
        }

        // Approve a worker
        async function approveWorker(workerId) {
            try {
                const response = await fetch(`/auth/admin/workers/approve/${workerId}`, {
                    method: 'POST',
                    headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` }
                });

                if (response.ok) {
                    alert('Worker approved successfully!');
                    loadPendingWorkers();
                } else {
                    alert('Failed to approve worker.');
                }
            } catch (error) {
                console.error('Error approving worker:', error);
            }
        }

        // Reject a worker
        async function rejectWorker(workerId) {
            try {
                const response = await fetch(`/auth/admin/workers/reject/${workerId}`, {
                    method: 'POST',
                    headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` }
                });

                if (response.ok) {
                    alert('Worker rejected successfully!');
                    loadPendingWorkers();
                } else {
                    alert('Failed to reject worker.');
                }
            } catch (error) {
                console.error('Error rejecting worker:', error);
            }
        }

        // Load all services
        async function loadServices() {
            try {
                const response = await fetch('/services/all', {
                    headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` }
                });

                if (response.ok) {
                    const services = await response.json();
                    const container = document.getElementById('services-container');
                    container.innerHTML = services.length
                        ? services.map(service => `
                            <div class="service-card">
                                <h3>${service.name}</h3>
                                <p>Description: ${service.description || 'N/A'}</p>
                                <p>Price: $${service.price.toFixed(2)}</p>
                                <p>Status: ${service.status}</p>
                                <p>Worker ID: ${service.worker_id}</p>
                                <p>Booked By: ${service.booked_by || 'N/A'}</p>
                                <p>Created At: ${new Date(service.created_at).toLocaleString()}</p>
                                <button onclick="deleteService(${service.id})">Delete</button>
                            </div>`).join('')
                        : '<p>No services available.</p>';
                } else {
                    console.error('Failed to fetch services.');
                }
            } catch (error) {
                console.error('Error loading services:', error);
            }
        }

        // Delete a service
        async function deleteService(serviceId) {
            try {
                const response = await fetch(`/services/delete/${serviceId}`, {
                    method: 'DELETE',
                    headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` }
                });

                if (response.ok) {
                    alert('Service deleted successfully!');
                    loadServices();
                } else {
                    alert('Failed to delete service.');
                }
            } catch (error) {
                console.error('Error deleting service:', error);
            }
        }

        // Load admin reports
        async function loadReports() {
            try {
                const response = await fetch('/admin/reports', {
                    headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` }
                });

                if (response.ok) {
                    const reports = await response.json();
                    const container = document.getElementById('reports-container');
                    container.innerHTML = reports.length
                        ? reports.map(report => `
                            <div class="report-card">
                                <h3>${report.title}</h3>
                                <p>${report.description}</p>
                            </div>`).join('')
                        : '<p>No reports available.</p>';
                } else {
                    console.error('Failed to fetch reports.');
                }
            } catch (error) {
                console.error('Error loading reports:', error);
            }
        }

        // Logout function
        async function logout() {
            try {
                const token = localStorage.getItem('token');
                if (!token) {
                    alert('No token found. You are already logged out.');
                    window.location.href = '/login.html';
                    return;
                }

                const response = await fetch('/auth/logout', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json',
                    },
                    credentials: 'include', // Ensure cookies are sent with the request
                });

                if (response.ok) {
                    localStorage.removeItem('token'); // Clear the token from localStorage
                    window.location.href = '/login.html'; // Redirect to the login page
                } else {
                    const result = await response.json();
                    alert(result.message || 'Logout failed. Please try again.');
                }
            } catch (error) {
                console.error('Error during logout:', error);
                alert('An error occurred while logging out.');
            }
        }

        // Load initial data
        document.addEventListener('DOMContentLoaded', () => {
            fetchClientDetails();
            loadPendingWorkers();
        });
    </script>
</body>
</html>