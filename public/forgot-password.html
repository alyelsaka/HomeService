<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HomeServices - Forgot Password</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Language selector styling */
        .language-selector {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
        }

        #language-selector {
            padding: 8px;
            border-radius: 5px;
            border: 1px solid #ccc;
            background-color: #fff;
            color: #333;
            font-size: 16px;
        }

        /* RTL support for Arabic */
        body[dir="rtl"] {
            direction: rtl;
            text-align: right;
        }
    </style>
</head>
<body class="auth-page">
    <nav class="navbar">
        <a href="index.html" class="nav-brand" data-translate="home">HomeServices</a>
        <div class="nav-links">
            <button onclick="location.href='login.html'" class="login-btn" data-translate="login">Login</button>
        </div>
    </nav>

    <div class="auth-container">
        <div class="auth-card">
            <div class="auth-header">
                <h2 data-translate="forgotPassword">Forgot Password</h2>
                <p data-translate="forgotPasswordPrompt">Please enter your email and phone number to reset your password.</p>
            </div>

            <form class="auth-form" id="forgotPasswordForm">
                <div class="form-group">
                    <i class="fas fa-envelope"></i>
                    <input type="email" name="email" id="email" required placeholder="Email Address" data-translate="emailPlaceholder">
                </div>

                <div class="form-group">
                    <i class="fas fa-phone"></i>
                    <input type="tel" name="phonenumber" id="phonenumber" required placeholder="Phone Number" data-translate="phonePlaceholder">
                </div>

                <div class="form-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" name="newPassword" id="newPassword" required placeholder="New Password" data-translate="newPasswordPlaceholder">
                </div>

                <button type="submit" class="auth-button" id="resetPasswordButton" data-translate="resetPasswordButton">Reset Password</button>
            </form>

            <div class="auth-footer">
                <p data-translate="rememberPassword">Remember your password? <a href="login.html" data-translate="loginLink">Login</a></p>
            </div>
        </div>
    </div>

    <!-- Language Selector -->
    <div class="language-selector">
        <select id="language-selector" onchange="changeLanguage(this.value)">
            <option value="en">ЁЯЗ║ЁЯЗ╕ English</option>
            <option value="zh">ЁЯЗиЁЯЗ│ ф╕нцЦЗ (Chinese)</option>
            <option value="es">ЁЯЗкЁЯЗ╕ Espa├▒ol (Spanish)</option>
            <option value="hi">ЁЯЗоЁЯЗ│ рд╣рд┐рдиреНрджреА (Hindi)</option>
            <option value="ar">ЁЯЗ╕ЁЯЗж ╪з┘Д╪╣╪▒╪и┘К╪й (Arabic)</option>
            <option value="pt">ЁЯЗ╡ЁЯЗ╣ Portugu├кs (Portuguese)</option>
            <option value="bn">ЁЯЗзЁЯЗй ржмрж╛ржВрж▓рж╛ (Bengali)</option>
            <option value="ru">ЁЯЗ╖ЁЯЗ║ ╨а╤Г╤Б╤Б╨║╨╕╨╣ (Russian)</option>
            <option value="ja">ЁЯЗпЁЯЗ╡ цЧецЬмшкЮ (Japanese)</option>
            <option value="pa">ЁЯЗоЁЯЗ│ рикрй░риЬри╛римрйА (Punjabi)</option>
            <option value="de">ЁЯЗйЁЯЗк Deutsch (German)</option>
            <option value="fr">ЁЯЗлЁЯЗ╖ Fran├зais (French)</option>
        </select>
    </div>

    <script>
        // Define translations for all supported languages
        const translations = {
            en: {
                home: "HomeServices",
                login: "Login",
                forgotPassword: "Forgot Password",
                forgotPasswordPrompt: "Please enter your email and phone number to reset your password.",
                emailPlaceholder: "Email Address",
                phonePlaceholder: "Phone Number",
                newPasswordPlaceholder: "New Password",
                resetPasswordButton: "Reset Password",
                rememberPassword: "Remember your password?",
                loginLink: "Login"
            },
            zh: {
                home: "хо╢х║нцЬНхКб",
                login: "чЩ╗х╜Х",
                forgotPassword: "х┐Шшо░хпЖчаБ",
                forgotPasswordPrompt: "шп╖ш╛УхЕецВичЪДчФ╡хнРщВоф╗╢хТМчФ╡шпЭхП╖чаБф╗ещЗНч╜охпЖчаБуАВ",
                emailPlaceholder: "чФ╡хнРщВоф╗╢хЬ░хЭА",
                phonePlaceholder: "чФ╡шпЭхП╖чаБ",
                newPasswordPlaceholder: "цЦ░хпЖчаБ",
                resetPasswordButton: "щЗНч╜охпЖчаБ",
                rememberPassword: "шо░х╛ЧхпЖчаБя╝Я",
                loginLink: "чЩ╗х╜Х"
            },
            es: {
                home: "Servicios del Hogar",
                login: "Iniciar Sesi├│n",
                forgotPassword: "Olvid├й mi contrase├▒a",
                forgotPasswordPrompt: "Por favor, ingrese su correo electr├│nico y n├║mero de tel├йfono para restablecer su contrase├▒a.",
                emailPlaceholder: "Correo Electr├│nico",
                phonePlaceholder: "N├║mero de Tel├йfono",
                newPasswordPlaceholder: "Nueva Contrase├▒a",
                resetPasswordButton: "Restablecer Contrase├▒a",
                rememberPassword: "┬┐Recuerdas tu contrase├▒a?",
                loginLink: "Iniciar Sesi├│n"
            },
            hi: {
                home: "рд╣реЛрдо рд╕рд░реНрд╡рд┐рд╕реЗрдЬ",
                login: "рд▓реЙрдЧрд┐рди",
                forgotPassword: "рдкрд╛рд╕рд╡рд░реНрдб рднреВрд▓ рдЧрдП",
                forgotPasswordPrompt: "рдХреГрдкрдпрд╛ рдЕрдкрдирд╛ рдкрд╛рд╕рд╡рд░реНрдб рд░реАрд╕реЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдирд╛ рдИрдореЗрд▓ рдФрд░ рдлреЛрди рдирдВрдмрд░ рджрд░реНрдЬ рдХрд░реЗрдВред",
                emailPlaceholder: "рдИрдореЗрд▓ рдкрддрд╛",
                phonePlaceholder: "рдлреЛрди рдирдВрдмрд░",
                newPasswordPlaceholder: "рдирдпрд╛ рдкрд╛рд╕рд╡рд░реНрдб",
                resetPasswordButton: "рдкрд╛рд╕рд╡рд░реНрдб рд░реАрд╕реЗрдЯ рдХрд░реЗрдВ",
                rememberPassword: "рдХреНрдпрд╛ рдЖрдкрдХреЛ рдЕрдкрдирд╛ рдкрд╛рд╕рд╡рд░реНрдб рдпрд╛рдж рд╣реИ?",
                loginLink: "рд▓реЙрдЧрд┐рди"
            },
            ar: {
                home: "╪о╪п┘Е╪з╪к ╪з┘Д┘Е┘Ж╪▓┘Д",
                login: "╪к╪│╪м┘К┘Д ╪з┘Д╪п╪о┘И┘Д",
                forgotPassword: "┘Ж╪│┘К╪к ┘Г┘Д┘Е╪й ╪з┘Д┘Е╪▒┘И╪▒",
                forgotPasswordPrompt: "╪з┘Д╪▒╪м╪з╪б ╪е╪п╪о╪з┘Д ╪и╪▒┘К╪п┘Г ╪з┘Д╪е┘Д┘Г╪к╪▒┘И┘Ж┘К ┘И╪▒┘В┘Е ╪з┘Д┘З╪з╪к┘Б ┘Д╪е╪╣╪з╪п╪й ╪к╪╣┘К┘К┘Ж ┘Г┘Д┘Е╪й ╪з┘Д┘Е╪▒┘И╪▒ ╪з┘Д╪о╪з╪╡╪й ╪и┘Г.",
                emailPlaceholder: "╪╣┘Ж┘И╪з┘Ж ╪з┘Д╪и╪▒┘К╪п ╪з┘Д╪е┘Д┘Г╪к╪▒┘И┘Ж┘К",
                phonePlaceholder: "╪▒┘В┘Е ╪з┘Д┘З╪з╪к┘Б",
                newPasswordPlaceholder: "┘Г┘Д┘Е╪й ╪з┘Д┘Е╪▒┘И╪▒ ╪з┘Д╪м╪п┘К╪п╪й",
                resetPasswordButton: "╪е╪╣╪з╪п╪й ╪к╪╣┘К┘К┘Ж ┘Г┘Д┘Е╪й ╪з┘Д┘Е╪▒┘И╪▒",
                rememberPassword: "┘З┘Д ╪к╪░┘Г╪▒╪к ┘Г┘Д┘Е╪й ╪з┘Д┘Е╪▒┘И╪▒╪Я",
                loginLink: "╪к╪│╪м┘К┘Д ╪з┘Д╪п╪о┘И┘Д"
            },
            pt: {
                home: "Servi├зos Dom├йsticos",
                login: "Login",
                forgotPassword: "Esqueci a senha",
                forgotPasswordPrompt: "Por favor, insira seu e-mail e n├║mero de telefone para redefinir sua senha.",
                emailPlaceholder: "Endere├зo de E-mail",
                phonePlaceholder: "N├║mero de Telefone",
                newPasswordPlaceholder: "Nova Senha",
                resetPasswordButton: "Redefinir Senha",
                rememberPassword: "Lembrou da sua senha?",
                loginLink: "Login"
            },
            bn: {
                home: "рж╣рзЛржо рж╕рж╛рж░рзНржнрж┐рж╕рзЗрж╕",
                login: "рж▓ржЧржЗржи",
                forgotPassword: "ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржнрзБрж▓рзЗ ржЧрзЗржЫрзЗржи",
                forgotPasswordPrompt: "ржЖржкржирж╛рж░ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб рж░рж┐рж╕рзЗржЯ ржХрж░рждрзЗ ржЖржкржирж╛рж░ ржЗржорзЗрж▓ ржПржмржВ ржлрзЛржи ржиржорзНржмрж░ рж▓рж┐ржЦрзБржиред",
                emailPlaceholder: "ржЗржорзЗрж▓ ржарж┐ржХрж╛ржирж╛",
                phonePlaceholder: "ржлрзЛржи ржиржорзНржмрж░",
                newPasswordPlaceholder: "ржирждрзБржи ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб",
                resetPasswordButton: "ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб рж░рж┐рж╕рзЗржЯ ржХрж░рзБржи",
                rememberPassword: "ржЖржкржирж╛рж░ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржоржирзЗ ржЖржЫрзЗ?",
                loginLink: "рж▓ржЧржЗржи"
            },
            ru: {
                home: "╨Ф╨╛╨╝╨░╤И╨╜╨╕╨╡ ╨г╤Б╨╗╤Г╨│╨╕",
                login: "╨Т╨╛╨╣╤В╨╕",
                forgotPassword: "╨Ч╨░╨▒╤Л╨╗╨╕ ╨┐╨░╤А╨╛╨╗╤М",
                forgotPasswordPrompt: "╨Я╨╛╨╢╨░╨╗╤Г╨╣╤Б╤В╨░, ╨▓╨▓╨╡╨┤╨╕╤В╨╡ ╨▓╨░╤И email ╨╕ ╨╜╨╛╨╝╨╡╤А ╤В╨╡╨╗╨╡╤Д╨╛╨╜╨░, ╤З╤В╨╛╨▒╤Л ╤Б╨▒╤А╨╛╤Б╨╕╤В╤М ╨┐╨░╤А╨╛╨╗╤М.",
                emailPlaceholder: "╨Р╨┤╤А╨╡╤Б ╤Н╨╗╨╡╨║╤В╤А╨╛╨╜╨╜╨╛╨╣ ╨┐╨╛╤З╤В╤Л",
                phonePlaceholder: "╨Э╨╛╨╝╨╡╤А ╤В╨╡╨╗╨╡╤Д╨╛╨╜╨░",
                newPasswordPlaceholder: "╨Э╨╛╨▓╤Л╨╣ ╨┐╨░╤А╨╛╨╗╤М",
                resetPasswordButton: "╨б╨▒╤А╨╛╤Б╨╕╤В╤М ╨┐╨░╤А╨╛╨╗╤М",
                rememberPassword: "╨Т╤Б╨┐╨╛╨╝╨╜╨╕╨╗╨╕ ╨┐╨░╤А╨╛╨╗╤М?",
                loginLink: "╨Т╨╛╨╣╤В╨╕"
            },
            ja: {
                home: "уГЫуГ╝уГауВ╡уГ╝уГУуВ╣",
                login: "уГнуВ░уВдуГ│",
                forgotPassword: "уГСуВ╣уГпуГ╝уГЙуВТх┐ШуВМуБЯ",
                forgotPasswordPrompt: "уГСуВ╣уГпуГ╝уГЙуВТуГкуВ╗уГГуГИуБЩуВЛуБлуБпуАБуГбуГ╝уГлуВвуГЙуГмуВ╣уБищЫ╗шй▒чХкхП╖уВТхЕехКЫуБЧуБжуБПуБауБХуБДуАВ",
                emailPlaceholder: "уГбуГ╝уГлуВвуГЙуГмуВ╣",
                phonePlaceholder: "щЫ╗шй▒чХкхП╖",
                newPasswordPlaceholder: "цЦ░уБЧуБДуГСуВ╣уГпуГ╝уГЙ",
                resetPasswordButton: "уГСуВ╣уГпуГ╝уГЙуВТуГкуВ╗уГГуГИ",
                rememberPassword: "уГСуВ╣уГпуГ╝уГЙуВТшжЪуБИуБжуБДуБ╛уБЩуБЛя╝Я",
                loginLink: "уГнуВ░уВдуГ│"
            },
            pa: {
                home: "риШри░ ри╕рйЗри╡ри╛ри╡ри╛риВ",
                login: "ри▓рйМриЧриЗрии",
                forgotPassword: "рикри╛ри╕ри╡ри░риб ринрйБрй▒ри▓ риЧриП",
                forgotPasswordPrompt: "риХри┐ри░рикри╛ риХри░риХрйЗ риЖрикригри╛ рикри╛ри╕ри╡ри░риб ри░рйАри╕рйИриЯ риХри░рии ри▓риИ риЖрикригри╛ риИриорйЗри▓ риЕридрйЗ рилрйЛрии риирй░римри░ рижри░риЬ риХри░рйЛред",
                emailPlaceholder: "риИриорйЗри▓ рикридри╛",
                phonePlaceholder: "рилрйЛрии риирй░римри░",
                newPasswordPlaceholder: "риири╡ри╛риВ рикри╛ри╕ри╡ри░риб",
                resetPasswordButton: "рикри╛ри╕ри╡ри░риб ри░рйАри╕рйИриЯ риХри░рйЛ",
                rememberPassword: "риХрйА ридрйБри╣ри╛риирйВрй░ риЖрикригри╛ рикри╛ри╕ри╡ри░риб рипри╛риж ри╣рйИ?",
                loginLink: "ри▓рйМриЧриЗрии"
            },
            de: {
                home: "Hausdienstleistungen",
                login: "Anmelden",
                forgotPassword: "Passwort vergessen",
                forgotPasswordPrompt: "Bitte geben Sie Ihre E-Mail und Telefonnummer ein, um Ihr Passwort zur├╝ckzusetzen.",
                emailPlaceholder: "E-Mail-Adresse",
                phonePlaceholder: "Telefonnummer",
                newPasswordPlaceholder: "Neues Passwort",
                resetPasswordButton: "Passwort zur├╝cksetzen",
                rememberPassword: "Passwort wieder eingefallen?",
                loginLink: "Anmelden"
            },
            fr: {
                home: "Services ├а Domicile",
                login: "Connexion",
                forgotPassword: "Mot de passe oubli├й",
                forgotPasswordPrompt: "Veuillez entrer votre e-mail et num├йro de t├йl├йphone pour r├йinitialiser votre mot de passe.",
                emailPlaceholder: "Adresse e-mail",
                phonePlaceholder: "Num├йro de t├йl├йphone",
                newPasswordPlaceholder: "Nouveau mot de passe",
                resetPasswordButton: "R├йinitialiser le mot de passe",
                rememberPassword: "Vous vous souvenez de votre mot de passe?",
                loginLink: "Connexion"
            }
        };

        // Function to change language
        function changeLanguage(language) {
            const elements = document.querySelectorAll('[data-translate]');
            elements.forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[language] && translations[language][key]) {
                    element.textContent = translations[language][key];
                }
            });

            // Update text direction for RTL languages (e.g., Arabic)
            if (language === "ar") {
                document.body.setAttribute("dir", "rtl");
            } else {
                document.body.setAttribute("dir", "ltr");
            }
        }

        // Initialize with default language (English)
        document.addEventListener('DOMContentLoaded', () => {
            changeLanguage('en');
        });

        // Handle forgot password form submission
        document.getElementById('forgotPasswordForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('email').value.trim();
            const phonenumber = document.getElementById('phonenumber').value.trim();
            const newPassword = document.getElementById('newPassword').value.trim();

            if (!email || !phonenumber || !newPassword) {
                alert('Please fill in all fields.');
                return;
            }

            try {
                const response = await fetch('/auth/reset-password', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ email, phonenumber, newPassword })
                });

                const result = await response.json();

                if (response.ok) {
                    alert(result.message || 'Password reset successful!');
                    window.location.href = 'login.html'; // Redirect to login page
                } else {
                    alert(result.message || 'Failed to reset password. Please try again.');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('An error occurred while resetting the password. Please try again later.');
            }
        });
    </script>
</body>
</html>