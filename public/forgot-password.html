<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HomeServices - Forgot Password</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Language selector styling */
        .language-selector {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
        }

        #language-selector {
            padding: 8px;
            border-radius: 5px;
            border: 1px solid #ccc;
            background-color: #fff;
            color: #333;
            font-size: 16px;
        }

        /* RTL support for Arabic */
        body[dir="rtl"] {
            direction: rtl;
            text-align: right;
        }
    </style>
</head>
<body class="auth-page">
    <nav class="navbar">
        <a href="index.html" class="nav-brand" data-translate="home">HomeServices</a>
        <div class="nav-links">
            <button onclick="location.href='login.html'" class="login-btn" data-translate="login">Login</button>
        </div>
    </nav>

    <div class="auth-container">
        <div class="auth-card">
            <div class="auth-header">
                <h2 data-translate="forgotPassword">Forgot Password</h2>
                <p data-translate="forgotPasswordPrompt">Please enter your email and phone number to reset your password.</p>
            </div>

            <form class="auth-form" id="forgotPasswordForm">
                <div class="form-group">
                    <i class="fas fa-envelope"></i>
                    <input type="email" name="email" id="email" required placeholder="Email Address" data-translate="emailPlaceholder">
                </div>

                <div class="form-group">
                    <i class="fas fa-phone"></i>
                    <input type="tel" name="phonenumber" id="phonenumber" required placeholder="Phone Number" data-translate="phonePlaceholder">
                </div>

                <div class="form-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" name="newPassword" id="newPassword" required placeholder="New Password" data-translate="newPasswordPlaceholder">
                </div>

                <button type="submit" class="auth-button" id="resetPasswordButton" data-translate="resetPasswordButton">Reset Password</button>
            </form>

            <div class="auth-footer">
                <p data-translate="rememberPassword">Remember your password? <a href="login.html" data-translate="loginLink">Login</a></p>
            </div>
        </div>
    </div>

    <!-- Language Selector -->
    <div class="language-selector">
        <select id="language-selector" onchange="changeLanguage(this.value)">
            <option value="en">ğŸ‡ºğŸ‡¸ English</option>
            <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡ (Chinese)</option>
            <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol (Spanish)</option>
            <option value="hi">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤¨à¥à¤¦à¥€ (Hindi)</option>
            <option value="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Arabic)</option>
            <option value="pt">ğŸ‡µğŸ‡¹ PortuguÃªs (Portuguese)</option>
            <option value="bn">ğŸ‡§ğŸ‡© à¦¬à¦¾à¦‚à¦²à¦¾ (Bengali)</option>
            <option value="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹ (Russian)</option>
            <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª (Japanese)</option>
            <option value="pa">ğŸ‡®ğŸ‡³ à¨ªà©°à¨œà¨¾à¨¬à©€ (Punjabi)</option>
            <option value="de">ğŸ‡©ğŸ‡ª Deutsch (German)</option>
            <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais (French)</option>
        </select>
    </div>

    <script>
        // Define translations for all supported languages
        const translations = {
            en: {
                home: "HomeServices",
                login: "Login",
                forgotPassword: "Forgot Password",
                forgotPasswordPrompt: "Please enter your email and phone number to reset your password.",
                emailPlaceholder: "Email Address",
                phonePlaceholder: "Phone Number",
                newPasswordPlaceholder: "New Password",
                resetPasswordButton: "Reset Password",
                rememberPassword: "Remember your password?",
                loginLink: "Login"
            },
            zh: {
                home: "å®¶åº­æœåŠ¡",
                login: "ç™»å½•",
                forgotPassword: "å¿˜è®°å¯†ç ",
                forgotPasswordPrompt: "è¯·è¾“å…¥æ‚¨çš„ç”µå­é‚®ä»¶å’Œç”µè¯å·ç ä»¥é‡ç½®å¯†ç ã€‚",
                emailPlaceholder: "ç”µå­é‚®ä»¶åœ°å€",
                phonePlaceholder: "ç”µè¯å·ç ",
                newPasswordPlaceholder: "æ–°å¯†ç ",
                resetPasswordButton: "é‡ç½®å¯†ç ",
                rememberPassword: "è®°å¾—å¯†ç ï¼Ÿ",
                loginLink: "ç™»å½•"
            },
            es: {
                home: "Servicios del Hogar",
                login: "Iniciar SesiÃ³n",
                forgotPassword: "OlvidÃ© mi contraseÃ±a",
                forgotPasswordPrompt: "Por favor, ingrese su correo electrÃ³nico y nÃºmero de telÃ©fono para restablecer su contraseÃ±a.",
                emailPlaceholder: "Correo ElectrÃ³nico",
                phonePlaceholder: "NÃºmero de TelÃ©fono",
                newPasswordPlaceholder: "Nueva ContraseÃ±a",
                resetPasswordButton: "Restablecer ContraseÃ±a",
                rememberPassword: "Â¿Recuerdas tu contraseÃ±a?",
                loginLink: "Iniciar SesiÃ³n"
            },
            hi: {
                home: "à¤¹à¥‹à¤® à¤¸à¤°à¥à¤µà¤¿à¤¸à¥‡à¤œ",
                login: "à¤²à¥‰à¤—à¤¿à¤¨",
                forgotPassword: "à¤ªà¤¾à¤¸à¤µà¤°à¥à¤¡ à¤­à¥‚à¤² à¤—à¤",
                forgotPasswordPrompt: "à¤•à¥ƒà¤ªà¤¯à¤¾ à¤…à¤ªà¤¨à¤¾ à¤ªà¤¾à¤¸à¤µà¤°à¥à¤¡ à¤°à¥€à¤¸à¥‡à¤Ÿ à¤•à¤°à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤…à¤ªà¤¨à¤¾ à¤ˆà¤®à¥‡à¤² à¤”à¤° à¤«à¥‹à¤¨ à¤¨à¤‚à¤¬à¤° à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚à¥¤",
                emailPlaceholder: "à¤ˆà¤®à¥‡à¤² à¤ªà¤¤à¤¾",
                phonePlaceholder: "à¤«à¥‹à¤¨ à¤¨à¤‚à¤¬à¤°",
                newPasswordPlaceholder: "à¤¨à¤¯à¤¾ à¤ªà¤¾à¤¸à¤µà¤°à¥à¤¡",
                resetPasswordButton: "à¤ªà¤¾à¤¸à¤µà¤°à¥à¤¡ à¤°à¥€à¤¸à¥‡à¤Ÿ à¤•à¤°à¥‡à¤‚",
                rememberPassword: "à¤•à¥à¤¯à¤¾ à¤†à¤ªà¤•à¥‹ à¤…à¤ªà¤¨à¤¾ à¤ªà¤¾à¤¸à¤µà¤°à¥à¤¡ à¤¯à¤¾à¤¦ à¤¹à¥ˆ?",
                loginLink: "à¤²à¥‰à¤—à¤¿à¤¨"
            },
            ar: {
                home: "Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ù†Ø²Ù„",
                login: "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",
                forgotPassword: "Ù†Ø³ÙŠØª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",
                forgotPasswordPrompt: "Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆØ±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù„Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ.",
                emailPlaceholder: "Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",
                phonePlaceholder: "Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ",
                newPasswordPlaceholder: "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©",
                resetPasswordButton: "Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",
                rememberPassword: "Ù‡Ù„ ØªØ°ÙƒØ±Øª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±ØŸ",
                loginLink: "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„"
            },
            pt: {
                home: "ServiÃ§os DomÃ©sticos",
                login: "Login",
                forgotPassword: "Esqueci a senha",
                forgotPasswordPrompt: "Por favor, insira seu e-mail e nÃºmero de telefone para redefinir sua senha.",
                emailPlaceholder: "EndereÃ§o de E-mail",
                phonePlaceholder: "NÃºmero de Telefone",
                newPasswordPlaceholder: "Nova Senha",
                resetPasswordButton: "Redefinir Senha",
                rememberPassword: "Lembrou da sua senha?",
                loginLink: "Login"
            },
            bn: {
                home: "à¦¹à§‹à¦® à¦¸à¦¾à¦°à§à¦­à¦¿à¦¸à§‡à¦¸",
                login: "à¦²à¦—à¦‡à¦¨",
                forgotPassword: "à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡ à¦­à§à¦²à§‡ à¦—à§‡à¦›à§‡à¦¨",
                forgotPasswordPrompt: "à¦†à¦ªà¦¨à¦¾à¦° à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡ à¦°à¦¿à¦¸à§‡à¦Ÿ à¦•à¦°à¦¤à§‡ à¦†à¦ªà¦¨à¦¾à¦° à¦‡à¦®à§‡à¦² à¦à¦¬à¦‚ à¦«à§‹à¦¨ à¦¨à¦®à§à¦¬à¦° à¦²à¦¿à¦–à§à¦¨à¥¤",
                emailPlaceholder: "à¦‡à¦®à§‡à¦² à¦ à¦¿à¦•à¦¾à¦¨à¦¾",
                phonePlaceholder: "à¦«à§‹à¦¨ à¦¨à¦®à§à¦¬à¦°",
                newPasswordPlaceholder: "à¦¨à¦¤à§à¦¨ à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡",
                resetPasswordButton: "à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡ à¦°à¦¿à¦¸à§‡à¦Ÿ à¦•à¦°à§à¦¨",
                rememberPassword: "à¦†à¦ªà¦¨à¦¾à¦° à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡ à¦®à¦¨à§‡ à¦†à¦›à§‡?",
                loginLink: "à¦²à¦—à¦‡à¦¨"
            },
            ru: {
                home: "Ğ”Ğ¾Ğ¼Ğ°ÑˆĞ½Ğ¸Ğµ Ğ£ÑĞ»ÑƒĞ³Ğ¸",
                login: "Ğ’Ğ¾Ğ¹Ñ‚Ğ¸",
                forgotPassword: "Ğ—Ğ°Ğ±Ñ‹Ğ»Ğ¸ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ",
                forgotPasswordPrompt: "ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ²Ğ°Ñˆ email Ğ¸ Ğ½Ğ¾Ğ¼ĞµÑ€ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ°, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ ÑĞ±Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ.",
                emailPlaceholder: "ĞĞ´Ñ€ĞµÑ ÑĞ»ĞµĞºÑ‚Ñ€Ğ¾Ğ½Ğ½Ğ¾Ğ¹ Ğ¿Ğ¾Ñ‡Ñ‚Ñ‹",
                phonePlaceholder: "ĞĞ¾Ğ¼ĞµÑ€ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ°",
                newPasswordPlaceholder: "ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ",
                resetPasswordButton: "Ğ¡Ğ±Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ",
                rememberPassword: "Ğ’ÑĞ¿Ğ¾Ğ¼Ğ½Ğ¸Ğ»Ğ¸ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ?",
                loginLink: "Ğ’Ğ¾Ğ¹Ñ‚Ğ¸"
            },
            ja: {
                home: "ãƒ›ãƒ¼ãƒ ã‚µãƒ¼ãƒ“ã‚¹",
                login: "ãƒ­ã‚°ã‚¤ãƒ³",
                forgotPassword: "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¿˜ã‚ŒãŸ",
                forgotPasswordPrompt: "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒªã‚»ãƒƒãƒˆã™ã‚‹ã«ã¯ã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨é›»è©±ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚",
                emailPlaceholder: "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹",
                phonePlaceholder: "é›»è©±ç•ªå·",
                newPasswordPlaceholder: "æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰",
                resetPasswordButton: "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒªã‚»ãƒƒãƒˆ",
                rememberPassword: "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è¦šãˆã¦ã„ã¾ã™ã‹ï¼Ÿ",
                loginLink: "ãƒ­ã‚°ã‚¤ãƒ³"
            },
            pa: {
                home: "à¨˜à¨° à¨¸à©‡à¨µà¨¾à¨µà¨¾à¨‚",
                login: "à¨²à©Œà¨—à¨‡à¨¨",
                forgotPassword: "à¨ªà¨¾à¨¸à¨µà¨°à¨¡ à¨­à©à©±à¨² à¨—à¨",
                forgotPasswordPrompt: "à¨•à¨¿à¨°à¨ªà¨¾ à¨•à¨°à¨•à©‡ à¨†à¨ªà¨£à¨¾ à¨ªà¨¾à¨¸à¨µà¨°à¨¡ à¨°à©€à¨¸à©ˆà¨Ÿ à¨•à¨°à¨¨ à¨²à¨ˆ à¨†à¨ªà¨£à¨¾ à¨ˆà¨®à©‡à¨² à¨…à¨¤à©‡ à¨«à©‹à¨¨ à¨¨à©°à¨¬à¨° à¨¦à¨°à¨œ à¨•à¨°à©‹à¥¤",
                emailPlaceholder: "à¨ˆà¨®à©‡à¨² à¨ªà¨¤à¨¾",
                phonePlaceholder: "à¨«à©‹à¨¨ à¨¨à©°à¨¬à¨°",
                newPasswordPlaceholder: "à¨¨à¨µà¨¾à¨‚ à¨ªà¨¾à¨¸à¨µà¨°à¨¡",
                resetPasswordButton: "à¨ªà¨¾à¨¸à¨µà¨°à¨¡ à¨°à©€à¨¸à©ˆà¨Ÿ à¨•à¨°à©‹",
                rememberPassword: "à¨•à©€ à¨¤à©à¨¹à¨¾à¨¨à©‚à©° à¨†à¨ªà¨£à¨¾ à¨ªà¨¾à¨¸à¨µà¨°à¨¡ à¨¯à¨¾à¨¦ à¨¹à©ˆ?",
                loginLink: "à¨²à©Œà¨—à¨‡à¨¨"
            },
            de: {
                home: "Hausdienstleistungen",
                login: "Anmelden",
                forgotPassword: "Passwort vergessen",
                forgotPasswordPrompt: "Bitte geben Sie Ihre E-Mail und Telefonnummer ein, um Ihr Passwort zurÃ¼ckzusetzen.",
                emailPlaceholder: "E-Mail-Adresse",
                phonePlaceholder: "Telefonnummer",
                newPasswordPlaceholder: "Neues Passwort",
                resetPasswordButton: "Passwort zurÃ¼cksetzen",
                rememberPassword: "Passwort wieder eingefallen?",
                loginLink: "Anmelden"
            },
            fr: {
                home: "Services Ã  Domicile",
                login: "Connexion",
                forgotPassword: "Mot de passe oubliÃ©",
                forgotPasswordPrompt: "Veuillez entrer votre e-mail et numÃ©ro de tÃ©lÃ©phone pour rÃ©initialiser votre mot de passe.",
                emailPlaceholder: "Adresse e-mail",
                phonePlaceholder: "NumÃ©ro de tÃ©lÃ©phone",
                newPasswordPlaceholder: "Nouveau mot de passe",
                resetPasswordButton: "RÃ©initialiser le mot de passe",
                rememberPassword: "Vous vous souvenez de votre mot de passe?",
                loginLink: "Connexion"
            }
        };

        // Function to change language
        function changeLanguage(language) {
            const elements = document.querySelectorAll('[data-translate]');
            elements.forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[language] && translations[language][key]) {
                    element.textContent = translations[language][key];
                }
            });

            // Update text direction for RTL languages (e.g., Arabic)
            if (language === "ar") {
                document.body.setAttribute("dir", "rtl");
            } else {
                document.body.setAttribute("dir", "ltr");
            }
        }

        // Initialize with default language (English)
        document.addEventListener('DOMContentLoaded', () => {
            changeLanguage('en');
        });

        // Handle forgot password form submission
        document.getElementById('forgotPasswordForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('email').value.trim();
            const phonenumber = document.getElementById('phonenumber').value.trim();
            const newPassword = document.getElementById('newPassword').value.trim();

            if (!email || !phonenumber || !newPassword) {
                alert('Please fill in all fields.');
                return;
            }

            try {
                const response = await fetch('/auth/reset-password', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ email, phonenumber, newPassword })
                });

                const result = await response.json();

                if (response.ok) {
                    alert(result.message || 'Password reset successful!');
                    window.location.href = 'login.html'; // Redirect to login page
                } else {
                    alert(result.message || 'Failed to reset password. Please try again.');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('An error occurred while resetting the password. Please try again later.');
            }
        });
    </script>
</body>
</html>